function EasyS3(e,i){if(!i.domain||!i.apiKeySecret)throw new Error("Missing options for Easy S3.");this.init=function(){document.querySelector(e).onchange=async e=>{await Promise.all([...e.target.files].map(async e=>{const t=await(await fetch(i.domain+"/u",{method:"POST",headers:{"Content-Type":"application/json","X-Authorization":"Secret: "+i.secret},body:JSON.stringify({fileSize:e.size,fileName:e.name})})).json(),n=new FormData;return n.append("Content-Type",e.type),Object.entries(t.s3.fields).forEach(([e,t])=>{n.append(e,t)}),n.append("file",e),fetch(t.s3.url,{method:"POST",body:n}).then(e=>{e.ok&&document.dispatchEvent(new CustomEvent("easy_s3_upload_complete",{detail:t.misc}))})}))}},this.init()}